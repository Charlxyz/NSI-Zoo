<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <p><img src="travailnsi.jpg"></p>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Contact</title>
    <script type="text/javascript">
      function sendMail() {
        var data = {
          service_id: 'service_yrfld8r', // ID EmailJS
          template_id: 'template_464w6wd', // Template ID EmailJS
          user_id: 'l1cj7U3MonvVYvQbV', // Public Key EmailJS
          template_params: {
            'user_name': document.getElementById('name').value,
            'user_email': document.getElementById('mail').value, // email de l'utilisateur
            'user_message': document.getElementById('msg').value
          }
        };

        $.ajax('https://api.emailjs.com/api/v1.0/email/send', {
          type: 'POST',
          data: JSON.stringify(data),
          contentType: 'application/json'
        }).done(function() {
          alert('Votre email a bien été envoyé!');
        }).fail(function(error) {
          alert('Oups... ' + JSON.stringify(error));
        });
      }
    </script>
  </head>
  <body>
    <form onsubmit="sendMail(); return false;">
      <div>
        <label for="name">Nom :</label>
        <input type="text" id="name" name="user_name" required>
      </div>
      <div>
        <label for="mail">e-mail :</label>
        <input type="email" id="mail" name="user_mail" required pattern="/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/"> <!-- Verrifie la validité de l'email -->
      </div>
      <div>
        <label for="msg">Message :</label>
        <textarea id="msg" name="user_message"></textarea>
      </div>
      <div class="button">
        <button type="submit" href="page2.html">Envoyer le message</button>
      </div>
    </form>
  </body>
</html>